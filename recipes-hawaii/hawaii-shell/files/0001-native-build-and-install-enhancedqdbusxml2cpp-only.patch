From b0d95232d50819eb5541a158cc9c74797bd6f51a Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Andreas=20M=C3=BCller?= <schnitzeltony@googlemail.com>
Date: Thu, 29 Jan 2015 21:53:10 +0100
Subject: [PATCH] native: build and install enhancedqdbusxml2cpp only
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Upstream-Status: Inappropriate [embedded-specific]

Signed-off-by: Andreas MÃ¼ller <schnitzeltony@googlemail.com>
---
 3rdparty/CMakeLists.txt               |  3 +--
 3rdparty/qlogind/CMakeLists.txt       |  2 +-
 3rdparty/qlogind/tools/CMakeLists.txt |  2 ++
 CMakeLists.txt                        | 14 +++++++++-----
 4 files changed, 13 insertions(+), 8 deletions(-)

diff --git a/3rdparty/CMakeLists.txt b/3rdparty/CMakeLists.txt
index a30bd32..8d34a3b 100644
--- a/3rdparty/CMakeLists.txt
+++ b/3rdparty/CMakeLists.txt
@@ -1,3 +1,2 @@
-add_subdirectory(libqtxdg)
 add_subdirectory(qlogind)
-add_subdirectory(sigwatch)
+
diff --git a/3rdparty/qlogind/CMakeLists.txt b/3rdparty/qlogind/CMakeLists.txt
index e4ce7ae..e7e1486 100644
--- a/3rdparty/qlogind/CMakeLists.txt
+++ b/3rdparty/qlogind/CMakeLists.txt
@@ -1,2 +1,2 @@
 add_subdirectory(tools)
-add_subdirectory(src)
+
diff --git a/3rdparty/qlogind/tools/CMakeLists.txt b/3rdparty/qlogind/tools/CMakeLists.txt
index 06821e2..65cac3c 100644
--- a/3rdparty/qlogind/tools/CMakeLists.txt
+++ b/3rdparty/qlogind/tools/CMakeLists.txt
@@ -5,3 +5,5 @@ target_link_libraries (enhancedqdbusxml2cpp
     Qt5::DBus
     Qt5::Core
 )
+
+install(TARGETS enhancedqdbusxml2cpp DESTINATION ${BIN_INSTALL_DIR})
diff --git a/CMakeLists.txt b/CMakeLists.txt
index 116c085..e088adb 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -65,12 +65,13 @@ set(KF5_MIN_VERSION "5.1.0")
 # Find Qt5
 find_package(Qt5 ${QT_MIN_VERSION} CONFIG REQUIRED COMPONENTS
              Core
-             DBus
-             Gui
-             Widgets
-             Qml
-             Quick)
+             DBus)
+#             Gui
+#             Widgets
+#             Qml
+#             Quick)
 
+if(False)
 # Find KF5
 find_package(KF5 ${KF5_MIN_VERSION} REQUIRED COMPONENTS
              KDELibs4Support
@@ -83,9 +84,11 @@ find_package(KF5 ${KF5_MIN_VERSION} REQUIRED COMPONENTS
 
 # Find Green Island
 find_package(GreenIsland REQUIRED)
+endif()
 
 # Subdirectories
 add_subdirectory(3rdparty)
+if(False)
 add_subdirectory(compositor)
 add_subdirectory(data)
 add_subdirectory(declarative)
@@ -97,6 +100,7 @@ add_subdirectory(session)
 add_subdirectory(shells)
 add_subdirectory(styles)
 add_subdirectory(themes)
+endif()
 
 # Display featute summary
 feature_summary(WHAT ALL FATAL_ON_MISSING_REQUIRED_PACKAGES)
-- 
1.8.3.1

