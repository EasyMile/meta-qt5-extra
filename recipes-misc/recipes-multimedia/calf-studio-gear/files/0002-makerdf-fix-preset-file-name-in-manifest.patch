From 7827a72dd24e199c06ce8c73aeee5cc38f6353f0 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Andreas=20M=C3=BCller?= <schnitzeltony@googlemail.com>
Date: Mon, 9 Jan 2017 20:08:13 +0100
Subject: [PATCH] makerdf: fix preset file name in manifest
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

We have to use label from ladspa_plugin_info (e.g 'Filter') instead of name
set in presets.xml (e.g 'filter').

Fixes:

| Error opening file /usr/lib/lv2/calf.lv2/presets-filter.ttl (No such file or directory)
| lilv_world_load_file(): error: Error loading file `file:///usr/lib/lv2/calf.lv2/presets-filter.ttl'
| Error opening file /usr/lib/lv2/calf.lv2/presets-filter.ttl (No such file or directory)
| lilv_world_load_file(): error: Error loading file `file:///usr/lib/lv2/calf.lv2/presets-filter.ttl'
| Error opening file /usr/lib/lv2/calf.lv2/presets-filter.ttl (No such file or directory)
| lilv_world_load_file(): error: Error loading file `file:///usr/lib/lv2/calf.lv2/presets-filter.ttl'
| Error opening file /usr/lib/lv2/calf.lv2/presets-flanger.ttl (No such file or directory)
...

Upstream-Status: Submitted [1]

[1] https://github.com/calf-studio-gear/calf/pull/117

Signed-off-by: Andreas MÃ¼ller <schnitzeltony@googlemail.com>
---
 src/makerdf.cpp | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/makerdf.cpp b/src/makerdf.cpp
index ddc6318..119c68b 100644
--- a/src/makerdf.cpp
+++ b/src/makerdf.cpp
@@ -459,7 +459,7 @@ void make_ttl(string path_prefix, const string *data_dir)
             + ">";
         ttl += uri + " a lv2p:Preset ;\n"
             "    lv2:appliesTo " + ilm->second.second + " ;\n"
-            "    rdfs:seeAlso <presets-" + pr.plugin + ".ttl> .\n";
+            "    rdfs:seeAlso <presets-" + ilm->second.first + ".ttl> .\n";
         
         presets_ttl += uri + 
             " a lv2p:Preset ;\n"
-- 
2.5.5

