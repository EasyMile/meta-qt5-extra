From 2bb9e40bde1ab9e03bf276bbaa1a8047f6b1265d Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Andreas=20M=C3=BCller?= <schnitzeltony@googlemail.com>
Date: Thu, 5 Jan 2017 02:02:49 +0100
Subject: [PATCH 1/3] Preset: return reference to mName
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Otherwise we get temporary objects with non deterministic lifetime. Errors
caused are e.g mangled names in dssi get_program. Not easy to debug believe
me!

Upstream-Status: Applied [1]

https://github.com/amsynth/amsynth/pull/56

Signed-off-by: Andreas MÃ¼ller <schnitzeltony@googlemail.com>
---
 src/Preset.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/Preset.h b/src/Preset.h
index ad98b07..7b7f631 100644
--- a/src/Preset.h
+++ b/src/Preset.h
@@ -39,7 +39,7 @@ public:
 	
 	bool			isEqual			(const Preset &);
 
-	const std::string getName		() const { return mName; }
+	const std::string& getName		() const { return mName; }
 	void			setName			(const std::string name) { mName = name; }
 	
 	Parameter&		getParameter	(const std::string name);
-- 
2.5.5

