From 7e38e15ce6ed9a1b01feb243abe911287a5b0627 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Andreas=20M=C3=BCller?= <schnitzeltony@googlemail.com>
Date: Thu, 11 Dec 2014 15:33:08 +0100
Subject: [PATCH 05/12] Initial Wayland support IV
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

don't link libkworkspace against Xau in x11-less environments

Signed-off-by: Andreas MÃ¼ller <schnitzeltony@googlemail.com>
---
 libkworkspace/CMakeLists.txt | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

diff --git a/libkworkspace/CMakeLists.txt b/libkworkspace/CMakeLists.txt
index b456deb..95aaeb3 100644
--- a/libkworkspace/CMakeLists.txt
+++ b/libkworkspace/CMakeLists.txt
@@ -39,7 +39,6 @@ target_link_libraries(kworkspace
         KF5::I18n
         KF5::WindowSystem
         KF5::Plasma
-        Xau
 )
 target_include_directories(kworkspace PUBLIC "$<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}>"
                                       INTERFACE "$<INSTALL_INTERFACE:${INCLUDE_INSTALL_DIR}/kworkspace5>" )
@@ -47,7 +46,7 @@ target_include_directories(kworkspace PUBLIC "$<BUILD_INTERFACE:${CMAKE_CURRENT_
 configure_file(config-libkworkspace.h.cmake ${CMAKE_CURRENT_BINARY_DIR}/config-libkworkspace.h)
 
 if(X11_FOUND)
-    target_link_libraries(kworkspace PRIVATE Qt5::X11Extras ${X11_LIBRARIES})
+    target_link_libraries(kworkspace PRIVATE Qt5::X11Extras ${X11_LIBRARIES} Xau)
 endif()
 
 write_basic_config_version_file(${CMAKE_CURRENT_BINARY_DIR}/LibKWorkspaceConfigVersion.cmake VERSION
-- 
1.8.3.1

