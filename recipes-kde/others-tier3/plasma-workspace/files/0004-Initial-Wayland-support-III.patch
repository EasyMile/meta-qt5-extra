From 69d6878240c2b5aa680efa1cd76d0e18e5c42e7b Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Andreas=20M=C3=BCller?= <schnitzeltony@googlemail.com>
Date: Thu, 11 Dec 2014 14:01:47 +0100
Subject: [PATCH 04/11] Initial Wayland support III
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Remove traces on kwin. This is necccessary for pure wayland environments.

Signed-off-by: Andreas MÃ¼ller <schnitzeltony@googlemail.com>
---
 libkworkspace/CMakeLists.txt | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/libkworkspace/CMakeLists.txt b/libkworkspace/CMakeLists.txt
index b7a5348..b456deb 100644
--- a/libkworkspace/CMakeLists.txt
+++ b/libkworkspace/CMakeLists.txt
@@ -17,7 +17,9 @@ endif()
 
 set_source_files_properties(${KWIN_INTERFACE} PROPERTIES INCLUDE "interface_util.h")
 
-qt5_add_dbus_interface( kworkspace_LIB_SRCS ${KWIN_INTERFACE} kwin_interface )
+if(HAVE_X11)
+    qt5_add_dbus_interface( kworkspace_LIB_SRCS ${KWIN_INTERFACE} kwin_interface )
+endif()
 
 add_library(kworkspace ${kworkspace_LIB_SRCS})
 add_library(PW::KWorkspace ALIAS kworkspace)
-- 
1.8.3.1

